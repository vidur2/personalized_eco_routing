package tests

import (
	"context"
	"fmt"
	"line_integrals_fuel_efficiency/util"
	"line_integrals_fuel_efficiency/util/types"
	"testing"

	"github.com/stretchr/testify/assert"
)

var token string = "eyJhbGciOiJSUzI1NiIsImtpZCI6IjQ4NmYxNjQ4MjAwNWEyY2RhZjI2ZDkyMTQwMThkMDI5Y2E0NmZiNTYiLCJ0eXAiOiJKV1QifQ.eyJpc3MiOiJhY2NvdW50cy5nb29nbGUuY29tIiwiYXpwIjoiNjE4MTA0NzA4MDU0LTlyOXMxYzRhbGczNmVybGl1Y2hvOXQ1Mm4zMm42ZGdxLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwiYXVkIjoiNjE4MTA0NzA4MDU0LTlyOXMxYzRhbGczNmVybGl1Y2hvOXQ1Mm4zMm42ZGdxLmFwcHMuZ29vZ2xldXNlcmNvbnRlbnQuY29tIiwic3ViIjoiMTAxNjUxMDI4NzA0NDM0NjI1NjE1IiwiZW1haWwiOiJ2bW9kMjAwNUBnbWFpbC5jb20iLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiYXRfaGFzaCI6Ijd2YjZQQTVoZ1RFX2JVbWtaQWdLQlEiLCJpYXQiOjE2NTMyNDc1MDcsImV4cCI6MTY1MzI1MTEwNywianRpIjoiMmZlZWZjMWQ0Yjg1NDdkNDFjMmU3YWIwMTk4ODQ4NTNhMzEyM2E0YyJ9.EEjsPYNpiwbZNBTuMfY3qEWHiMpVjJYH10WpC49OSdfVEX7gtrPmxiW56846FA2YDsOYytON9dgG6o2K4nk46978NikSYyhqe7yu-IBY8hts81f7HREMvV3k3A0ni46y68F3ZLn5RwMJFnqqxAs8Eg8jOPE-yKw0wy9-NY7tekptgXQa-bQrtaZAqGbvhiKUdDAm78NEKlQSistkqXLSWEwUU1jZEzk8lNPxdkdeZD49zvijP_cE4B_XrX7zydkI_t6FGYV_ws2qr-vSaYXkVRK1WpVf5h1Z_j-pWX454XBlSEn-TWyw7mjaYdiwWBgTGIzZIi1lWb8kGUN2P_P4-w"

func TestVerification(t *testing.T) {
	util.InitClient()
	valid, err := util.VerifyToken(token, context.Background(), "vmod2005@gmail.com", types.ClientId(types.TestMode))
	if err != nil {
		fmt.Println(err)
	}
	assert.Equal(t, valid, true, "Token is invalid")
}
